#include <string.h>
#include <ros.h>
#include "Arduino.h"
#include "DFRobotDFPlayerMini.h"
#include <std_msgs/String.h>

#include <actionlib_msgs/GoalStatusArray.h>
DFRobotDFPlayerMini myDFPlayer;

ros::NodeHandle nh;

void statusCallback(const actionlib_msgs::GoalStatusArray& msg) {
     int status = msg.status_list[0].status;
  if (msg.status_list[0] == [])
   {
      Serial.println("ddd");
   }
   //Serial.println("ddd");
}

ros::Subscriber <actionlib_msgs::GoalStatusArray> msg("move_base/status",1, statusCallback); 

void setup()
{
  Serial.begin(115200);
  Serial2.begin(9600);
  
  if (!myDFPlayer.begin(Serial2)) {  //Use softwareSerial to communicate with mp3.
    while(true){delay(0); }}
  
  myDFPlayer.volume(30);  //Set volume value. From 0 to 30
  myDFPlayer.play(1);  //Play the first mp3

}


void loop()
{
//  static unsigned long timer = millis();
//  
//  if (millis() - timer > 3000) {
//    timer = millis();
//    myDFPlayer.next();  //Play next mp3 every 3 second.
//  }
}
